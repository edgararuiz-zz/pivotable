<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create pivot tables • pivotable</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Create pivot tables">
<meta property="og:description" content="Design data models for pivot tables, and easily create pivot tables on the fly.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">pivotable</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/edgararuiz/pivotable">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="pivotable" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#pivotable" class="anchor"></a>pivotable</h1></div>
<!-- badges: start -->

<ul>
<li><a href="#intro">Intro</a></li>
<li><a href="#installation">Installation</a></li>
<li>
<a href="#pivot-table">Pivot table</a>
<ul>
<li><a href="#values">Values</a></li>
<li><a href="#rows">Rows</a></li>
<li><a href="#columns">Columns</a></li>
</ul>
</li>
<li>
<a href="#pivot-table-operations">Pivot table operations</a>
<ul>
<li><a href="#switch-rows-to-columns">Switch rows to columns</a></li>
<li><a href="#filter">Filter</a></li>
<li><a href="#drill">Drill</a></li>
<li><a href="#totals">Totals</a></li>
<li><a href="#default-values">Default values</a></li>
<li><a href="#convert-to-tibble">Convert to tibble</a></li>
</ul>
</li>
<li><a href="#define-dimensions-and-measures">Define dimensions and measures</a></li>
<li>
<a href="#database-spark-and-data-table-connections">Database, Spark and <code>data.table</code> connections</a>
<ul>
<li><a href="#measures-and-dimensions">Measures and dimensions</a></li>
</ul>
</li>
<li><a href="#pivottabler">pivottabler</a></li>
</ul>
<div id="intro" class="section level2">
<h2 class="hasAnchor">
<a href="#intro" class="anchor"></a>Intro</h2>
<p>Create pivot tables with commonly used terms as commands such as: <code><a href="reference/rows-cols.html">pivot_rows()</a></code>, <code><a href="reference/rows-cols.html">pivot_columns()</a></code> and <code><a href="reference/pivot_values.html">pivot_values()</a></code>, and string them together with a pipe (<code><a href="reference/pipe.html">%&gt;%</a></code>).</p>
<p>The idea is that the creation of a pivot table is done using code, as opposed to drag-and-drop. This means that actions such as <code><a href="reference/pivot_flip.html">pivot_flip()</a></code> and <code><a href="reference/pivot_drill.html">pivot_drill()</a></code> are also possible, and performed using R commands.</p>
<p>Another goal of <code>pivotable</code> is to provide a framework to easily define <code><a href="reference/prep_measures.html">prep_measures()</a></code> and <code><a href="reference/prep_dimensions.html">prep_dimensions()</a></code> of your data. The resulting R object can then be used as the source of the pivot table. This should make it possible to create consistent analysis, and subsequent reporting of the data.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"edgararuiz/pivotable"</span>)</a></code></pre></div>
</div>
<div id="pivot-table" class="section level2">
<h2 class="hasAnchor">
<a href="#pivot-table" class="anchor"></a>Pivot table</h2>
<div id="values" class="section level3">
<h3 class="hasAnchor">
<a href="#values" class="anchor"></a>Values</h3>
<p>The <code><a href="reference/pivot_values.html">pivot_values()</a></code> function is used to add an aggregation in the pivot table. When used against a data frame, you will have to provide an aggregation formula of a field, or fields, within the data. If using a pre-defined set of dimensions and measures, then simply call the desired measure field, no need to re-aggregate. For more info see <a href="#define-dimensions-and-measures">Define dimensions and measures</a>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(pivotable)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales))</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;   sum(sales)   </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt;   10032628.85</span></a></code></pre></div>
<p>Multiple aggregations are supported by <code><a href="reference/pivot_values.html">pivot_values()</a></code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales), <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>())</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;   sum(sales)   n()  </span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;   10032628.85  307</span></a></code></pre></div>
<p>The aggregations can also be named inside <code><a href="reference/pivot_values.html">pivot_values()</a></code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="dt">total_sales =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales), <span class="dt">no_sales =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>())</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt;   total_sales  no_sales  </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;   10032628.85       307</span></a></code></pre></div>
</div>
<div id="rows" class="section level3">
<h3 class="hasAnchor">
<a href="#rows" class="anchor"></a>Rows</h3>
<p>As its name indicates, <code><a href="reference/rows-cols.html">pivot_rows()</a></code> adds a data grouping based on the variable or variables passed to the function. The aggregation is split by the variable(s) and each total is displayed by row.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales)) </a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt;              sum(sales)  </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; Australia      630623.1  </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; Austria       202062.53  </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; Belgium       108412.62  </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; Canada        224078.56  </span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; Denmark       245637.15  </span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; Finland       329581.91  </span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; France       1110916.52  </span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; Germany       220472.09  </span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; Ireland        57756.43  </span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; Italy         374674.31  </span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; Japan         188167.81  </span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; Norway         307463.7  </span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt; Philippines    94015.73  </span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt; Singapore     288488.41  </span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt; Spain        1215686.92  </span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt; Sweden        210014.21  </span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt; Switzerland   117713.56  </span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt; UK            478880.46  </span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; USA          3627982.83</span></a></code></pre></div>
</div>
<div id="columns" class="section level3">
<h3 class="hasAnchor">
<a href="#columns" class="anchor"></a>Columns</h3>
<p>As its name indicates, <code><a href="reference/rows-cols.html">pivot_rows()</a></code> adds a data grouping based on the variable or variables passed to the function. The aggregation is split by the variable(s) and each total is displayed by column.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_columns</a></span>(status) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales))</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;              Cancelled  Disputed  In Process  On Hold    Resolved  Shipped     </span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; Australia               14378.09    43971.43                        572273.58  </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; Austria                                                  28550.59   173511.94  </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; Belgium                              8411.95                        100000.67  </span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; Canada                                                              224078.56  </span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; Denmark                 26012.87                         24078.61   195545.67  </span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; Finland                                                             329581.91  </span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; France                              43784.69                       1067131.83  </span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; Germany                                                             220472.09  </span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt; Ireland                                                              57756.43  </span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; Italy                                                               374674.31  </span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; Japan                                                               188167.81  </span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt; Norway                                                               307463.7  </span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt; Philippines                                                          94015.73  </span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt; Singapore                                                           288488.41  </span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt; Spain         50010.65   31821.9    35133.34             53815.72  1044905.31  </span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#&gt; Sweden        48710.92                         26260.21             135043.08  </span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="co">#&gt; Switzerland                                                         117713.56  </span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt; UK            50408.25                                              428472.21  </span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">#&gt; USA           45357.66              13428.55  152718.98  44273.36  3372204.28</span></a></code></pre></div>
</div>
</div>
<div id="pivot-table-operations" class="section level2">
<h2 class="hasAnchor">
<a href="#pivot-table-operations" class="anchor"></a>Pivot table operations</h2>
<div id="switch-rows-to-columns" class="section level3">
<h3 class="hasAnchor">
<a href="#switch-rows-to-columns" class="anchor"></a>Switch rows to columns</h3>
<p>Instead of “manually” switching the content of <code><a href="reference/rows-cols.html">pivot_rows()</a></code> and <code><a href="reference/rows-cols.html">pivot_columns()</a></code>, specially during data exploration, simply pipe the code to the <code><a href="reference/pivot_flip.html">pivot_flip()</a></code> command.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_columns</a></span>(status) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="reference/pivot_flip.html">pivot_flip</a></span>()</a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;             Australia  Austria    Belgium    Canada     Denmark    Finland    France      Germany    Ireland   Italy      Japan      Norway    Philippines  Singapore  Spain       Sweden     Switzerland  UK         USA         </span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; Cancelled                                                                                                                                                                50010.65   48710.92                50408.25    45357.66  </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; Disputed     14378.09                                    26012.87                                                                                                         31821.9                                                 </span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; In Process   43971.43               8411.95                                     43784.69                                                                                 35133.34                                       13428.55  </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; On Hold                                                                                                                                                                             26260.21                           152718.98  </span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; Resolved                28550.59                         24078.61                                                                                                        53815.72                                       44273.36  </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; Shipped     572273.58  173511.94  100000.67  224078.56  195545.67  329581.91  1067131.83  220472.09  57756.43  374674.31  188167.81  307463.7     94015.73  288488.41  1044905.31  135043.08    117713.56  428472.21  3372204.28</span></a></code></pre></div>
<p><code>pivotable</code> also includes support for the <code><a href="https://rdrr.io/r/base/t.html">t()</a></code> method from base R. It will perform the exact same operation as <code><a href="reference/pivot_flip.html">pivot_flip()</a></code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_columns</a></span>(status) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/t.html">t</a></span>()</a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt;             Australia  Austria    Belgium    Canada     Denmark    Finland    France      Germany    Ireland   Italy      Japan      Norway    Philippines  Singapore  Spain       Sweden     Switzerland  UK         USA         </span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; Cancelled                                                                                                                                                                50010.65   48710.92                50408.25    45357.66  </span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; Disputed     14378.09                                    26012.87                                                                                                         31821.9                                                 </span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; In Process   43971.43               8411.95                                     43784.69                                                                                 35133.34                                       13428.55  </span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; On Hold                                                                                                                                                                             26260.21                           152718.98  </span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; Resolved                28550.59                         24078.61                                                                                                        53815.72                                       44273.36  </span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; Shipped     572273.58  173511.94  100000.67  224078.56  195545.67  329581.91  1067131.83  220472.09  57756.43  374674.31  188167.81  307463.7     94015.73  288488.41  1044905.31  135043.08    117713.56  428472.21  3372204.28</span></a></code></pre></div>
</div>
<div id="filter" class="section level3">
<h3 class="hasAnchor">
<a href="#filter" class="anchor"></a>Filter</h3>
<p>To limit the pivot table to display only a subset of the pivot table, use <code><a href="reference/pivot_focus.html">pivot_focus()</a></code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_columns</a></span>(status) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="dt">total_sales =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="reference/pivot_focus.html">pivot_focus</a></span>(</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">    country <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Japan"</span>, <span class="st">"USA"</span>, <span class="st">"UK"</span>), </a>
<a class="sourceLine" id="cb9-7" data-line-number="7">    status <span class="op">==</span><span class="st"> "Shipped"</span>,</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">    total_sales <span class="op">&gt;</span><span class="st"> </span><span class="dv">200000</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9">    )</a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt;      Shipped     </span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt; UK    428472.21  </span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt; USA  3372204.28</span></a></code></pre></div>
<p><code>pivotable</code> also supports <code>dplyr</code>’s <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> command.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_columns</a></span>(status) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="dt">total_sales =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">    country <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Japan"</span>, <span class="st">"USA"</span>, <span class="st">"UK"</span>), </a>
<a class="sourceLine" id="cb10-7" data-line-number="7">    status <span class="op">==</span><span class="st"> "Shipped"</span>,</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">    total_sales <span class="op">&gt;</span><span class="st"> </span><span class="dv">200000</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9">    )</a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;      Shipped     </span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt; UK    428472.21  </span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt; USA  3372204.28</span></a></code></pre></div>
</div>
<div id="drill" class="section level3">
<h3 class="hasAnchor">
<a href="#drill" class="anchor"></a>Drill</h3>
<p>Another powerful thing of pivot tables is the ability to drill down into the data. To do this in <code>pivotable</code>, you will need to define a hierarchy dimension using the <code><a href="reference/dim_hierarchy.html">dim_hierarchy()</a></code> command. That command is made to be called within one of the dimension definition functions, such as <code><a href="reference/rows-cols.html">pivot_rows()</a></code> or <code><a href="reference/rows-cols.html">pivot_columns()</a></code>. The order of the hierarchy is defined by the order in which the variables is passed to the function.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(<span class="dt">order_date =</span> <span class="kw"><a href="reference/dim_hierarchy.html">dim_hierarchy</a></span>(</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">    <span class="dt">year =</span> <span class="kw"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/format.html">format</a></span>(orderdate, <span class="st">"%Y"</span>)),</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">    <span class="dt">month =</span> <span class="kw"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/format.html">format</a></span>(orderdate, <span class="st">"%m"</span>))</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">    )</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales))</a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt;       sum(sales)  </span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; 2003  3516979.54  </span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; 2004   4724162.6  </span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; 2005  1791486.71</span></a></code></pre></div>
<p>The <code><a href="reference/pivot_drill.html">pivot_drill()</a></code> command will add the next level of the hierarchy dimension to the pivot table.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(<span class="dt">order_date =</span> <span class="kw"><a href="reference/dim_hierarchy.html">dim_hierarchy</a></span>(</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">    <span class="dt">year =</span> <span class="kw"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/format.html">format</a></span>(orderdate, <span class="st">"%Y"</span>)),</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">    <span class="dt">month =</span> <span class="kw"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/format.html">format</a></span>(orderdate, <span class="st">"%m"</span>))</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">    )</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="reference/pivot_drill.html">pivot_drill</a></span>(order_date)</a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt;           sum(sales)  </span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; 2003  1     129753.6  </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt;       2    140836.19  </span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt;       3     174504.9  </span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt;       4    201609.55  </span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt;       5    192673.11  </span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt;       6    168082.56  </span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt;       7    187731.88  </span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt;       8     197809.3  </span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt;       9    263973.36  </span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt;       10   568290.97  </span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt;       11  1029837.66  </span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">#&gt;       12   261876.46  </span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="co">#&gt; 2004  1    316577.42  </span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="co">#&gt;       2    311419.53  </span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24"><span class="co">#&gt;       3    205733.73  </span></a>
<a class="sourceLine" id="cb12-25" data-line-number="25"><span class="co">#&gt;       4    206148.12  </span></a>
<a class="sourceLine" id="cb12-26" data-line-number="26"><span class="co">#&gt;       5    273438.39  </span></a>
<a class="sourceLine" id="cb12-27" data-line-number="27"><span class="co">#&gt;       6    286674.22  </span></a>
<a class="sourceLine" id="cb12-28" data-line-number="28"><span class="co">#&gt;       7    327144.09  </span></a>
<a class="sourceLine" id="cb12-29" data-line-number="29"><span class="co">#&gt;       8    461501.27  </span></a>
<a class="sourceLine" id="cb12-30" data-line-number="30"><span class="co">#&gt;       9    320750.91  </span></a>
<a class="sourceLine" id="cb12-31" data-line-number="31"><span class="co">#&gt;       10   552924.25  </span></a>
<a class="sourceLine" id="cb12-32" data-line-number="32"><span class="co">#&gt;       11  1089048.01  </span></a>
<a class="sourceLine" id="cb12-33" data-line-number="33"><span class="co">#&gt;       12   372802.66  </span></a>
<a class="sourceLine" id="cb12-34" data-line-number="34"><span class="co">#&gt; 2005  1    339543.42  </span></a>
<a class="sourceLine" id="cb12-35" data-line-number="35"><span class="co">#&gt;       2    358186.18  </span></a>
<a class="sourceLine" id="cb12-36" data-line-number="36"><span class="co">#&gt;       3    374262.76  </span></a>
<a class="sourceLine" id="cb12-37" data-line-number="37"><span class="co">#&gt;       4    261633.29  </span></a>
<a class="sourceLine" id="cb12-38" data-line-number="38"><span class="co">#&gt;       5    457861.06</span></a></code></pre></div>
<p>A helper function called <code><a href="reference/dim_hierarchy_mqy.html">dim_hierarchy_mqy()</a></code> creates a three level date hierarchy: year, quarter and month. The function will create the formulas to calculate each level, but those formulas will not be evaluated until the drilling into the level. The formulas are generic enough to work on database back-ends.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(<span class="dt">order_date =</span> <span class="kw"><a href="reference/dim_hierarchy_mqy.html">dim_hierarchy_mqy</a></span>(orderdate)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/pivot_drill.html">pivot_drill</a></span>(order_date)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt;          sum(sales)  </span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; 2003  1   445094.69  </span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt;       2   562365.22  </span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt;       3   649514.54  </span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt;       4  1860005.09  </span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt; 2004  1   833730.68  </span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt;       2   766260.73  </span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt;       3  1109396.27  </span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt;       4  2014774.92  </span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt; 2005  1  1071992.36  </span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt;       2   719494.35</span></a></code></pre></div>
</div>
<div id="totals" class="section level3">
<h3 class="hasAnchor">
<a href="#totals" class="anchor"></a>Totals</h3>
<p>The display of the totals can be controlled using <code><a href="reference/pivot_totals.html">pivot_totals()</a></code>. It is possible to control the display of row and column totals individually. <strong>Currently, sub-totals and grand totals are <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> aggregates, so if the actual calculations are not record counts, or another <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> consider leaving them off. For example, if the calculation is a <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, then the sub-total and grand total will be the aggregate <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> total of the averages, which would be incorrect</strong>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(status, country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/pivot_totals.html">pivot_totals</a></span>(</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">    <span class="dt">include_row_totals =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt;                          sum(sales)  </span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; Cancelled   Spain          50010.65  </span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt;             Sweden         48710.92  </span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt;             UK             50408.25  </span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt;             USA            45357.66  </span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt; Disputed    Australia      14378.09  </span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt;             Denmark        26012.87  </span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt;             Spain           31821.9  </span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt; In Process  Australia      43971.43  </span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt;             Belgium         8411.95  </span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt;             France         43784.69  </span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt;             Spain          35133.34  </span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt;             USA            13428.55  </span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">#&gt; On Hold     Sweden         26260.21  </span></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">#&gt;             USA           152718.98  </span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"><span class="co">#&gt; Resolved    Austria        28550.59  </span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"><span class="co">#&gt;             Denmark        24078.61  </span></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co">#&gt;             Spain          53815.72  </span></a>
<a class="sourceLine" id="cb14-25" data-line-number="25"><span class="co">#&gt;             USA            44273.36  </span></a>
<a class="sourceLine" id="cb14-26" data-line-number="26"><span class="co">#&gt; Shipped     Australia     572273.58  </span></a>
<a class="sourceLine" id="cb14-27" data-line-number="27"><span class="co">#&gt;             Austria       173511.94  </span></a>
<a class="sourceLine" id="cb14-28" data-line-number="28"><span class="co">#&gt;             Belgium       100000.67  </span></a>
<a class="sourceLine" id="cb14-29" data-line-number="29"><span class="co">#&gt;             Canada        224078.56  </span></a>
<a class="sourceLine" id="cb14-30" data-line-number="30"><span class="co">#&gt;             Denmark       195545.67  </span></a>
<a class="sourceLine" id="cb14-31" data-line-number="31"><span class="co">#&gt;             Finland       329581.91  </span></a>
<a class="sourceLine" id="cb14-32" data-line-number="32"><span class="co">#&gt;             France       1067131.83  </span></a>
<a class="sourceLine" id="cb14-33" data-line-number="33"><span class="co">#&gt;             Germany       220472.09  </span></a>
<a class="sourceLine" id="cb14-34" data-line-number="34"><span class="co">#&gt;             Ireland        57756.43  </span></a>
<a class="sourceLine" id="cb14-35" data-line-number="35"><span class="co">#&gt;             Italy         374674.31  </span></a>
<a class="sourceLine" id="cb14-36" data-line-number="36"><span class="co">#&gt;             Japan         188167.81  </span></a>
<a class="sourceLine" id="cb14-37" data-line-number="37"><span class="co">#&gt;             Norway         307463.7  </span></a>
<a class="sourceLine" id="cb14-38" data-line-number="38"><span class="co">#&gt;             Philippines    94015.73  </span></a>
<a class="sourceLine" id="cb14-39" data-line-number="39"><span class="co">#&gt;             Singapore     288488.41  </span></a>
<a class="sourceLine" id="cb14-40" data-line-number="40"><span class="co">#&gt;             Spain        1044905.31  </span></a>
<a class="sourceLine" id="cb14-41" data-line-number="41"><span class="co">#&gt;             Sweden        135043.08  </span></a>
<a class="sourceLine" id="cb14-42" data-line-number="42"><span class="co">#&gt;             Switzerland   117713.56  </span></a>
<a class="sourceLine" id="cb14-43" data-line-number="43"><span class="co">#&gt;             UK            428472.21  </span></a>
<a class="sourceLine" id="cb14-44" data-line-number="44"><span class="co">#&gt;             USA          3372204.28</span></a></code></pre></div>
<p>A default can be set to control if the column or row totals are displayed. The default is set to not show.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="reference/pivot_default_totals.html">pivot_default_totals</a></span>(</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">  <span class="dt">include_column_totals =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb15-3" data-line-number="3">  <span class="dt">include_row_totals =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4">  )</a>
<a class="sourceLine" id="cb15-5" data-line-number="5"></a>
<a class="sourceLine" id="cb15-6" data-line-number="6">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(status, country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales))</a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#&gt;                          sum(sales)   </span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">#&gt; Cancelled   Spain           50010.65  </span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">#&gt;             Sweden          48710.92  </span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">#&gt;             UK              50408.25  </span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">#&gt;             USA             45357.66  </span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt;             Total          194487.48  </span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">#&gt; Disputed    Australia       14378.09  </span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt;             Denmark         26012.87  </span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt;             Spain            31821.9  </span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">#&gt;             Total           72212.86  </span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co">#&gt; In Process  Australia       43971.43  </span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co">#&gt;             Belgium          8411.95  </span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21"><span class="co">#&gt;             France          43784.69  </span></a>
<a class="sourceLine" id="cb15-22" data-line-number="22"><span class="co">#&gt;             Spain           35133.34  </span></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="co">#&gt;             USA             13428.55  </span></a>
<a class="sourceLine" id="cb15-24" data-line-number="24"><span class="co">#&gt;             Total          144729.96  </span></a>
<a class="sourceLine" id="cb15-25" data-line-number="25"><span class="co">#&gt; On Hold     Sweden          26260.21  </span></a>
<a class="sourceLine" id="cb15-26" data-line-number="26"><span class="co">#&gt;             USA            152718.98  </span></a>
<a class="sourceLine" id="cb15-27" data-line-number="27"><span class="co">#&gt;             Total          178979.19  </span></a>
<a class="sourceLine" id="cb15-28" data-line-number="28"><span class="co">#&gt; Resolved    Austria         28550.59  </span></a>
<a class="sourceLine" id="cb15-29" data-line-number="29"><span class="co">#&gt;             Denmark         24078.61  </span></a>
<a class="sourceLine" id="cb15-30" data-line-number="30"><span class="co">#&gt;             Spain           53815.72  </span></a>
<a class="sourceLine" id="cb15-31" data-line-number="31"><span class="co">#&gt;             USA             44273.36  </span></a>
<a class="sourceLine" id="cb15-32" data-line-number="32"><span class="co">#&gt;             Total          150718.28  </span></a>
<a class="sourceLine" id="cb15-33" data-line-number="33"><span class="co">#&gt; Shipped     Australia      572273.58  </span></a>
<a class="sourceLine" id="cb15-34" data-line-number="34"><span class="co">#&gt;             Austria        173511.94  </span></a>
<a class="sourceLine" id="cb15-35" data-line-number="35"><span class="co">#&gt;             Belgium        100000.67  </span></a>
<a class="sourceLine" id="cb15-36" data-line-number="36"><span class="co">#&gt;             Canada         224078.56  </span></a>
<a class="sourceLine" id="cb15-37" data-line-number="37"><span class="co">#&gt;             Denmark        195545.67  </span></a>
<a class="sourceLine" id="cb15-38" data-line-number="38"><span class="co">#&gt;             Finland        329581.91  </span></a>
<a class="sourceLine" id="cb15-39" data-line-number="39"><span class="co">#&gt;             France        1067131.83  </span></a>
<a class="sourceLine" id="cb15-40" data-line-number="40"><span class="co">#&gt;             Germany        220472.09  </span></a>
<a class="sourceLine" id="cb15-41" data-line-number="41"><span class="co">#&gt;             Ireland         57756.43  </span></a>
<a class="sourceLine" id="cb15-42" data-line-number="42"><span class="co">#&gt;             Italy          374674.31  </span></a>
<a class="sourceLine" id="cb15-43" data-line-number="43"><span class="co">#&gt;             Japan          188167.81  </span></a>
<a class="sourceLine" id="cb15-44" data-line-number="44"><span class="co">#&gt;             Norway          307463.7  </span></a>
<a class="sourceLine" id="cb15-45" data-line-number="45"><span class="co">#&gt;             Philippines     94015.73  </span></a>
<a class="sourceLine" id="cb15-46" data-line-number="46"><span class="co">#&gt;             Singapore      288488.41  </span></a>
<a class="sourceLine" id="cb15-47" data-line-number="47"><span class="co">#&gt;             Spain         1044905.31  </span></a>
<a class="sourceLine" id="cb15-48" data-line-number="48"><span class="co">#&gt;             Sweden         135043.08  </span></a>
<a class="sourceLine" id="cb15-49" data-line-number="49"><span class="co">#&gt;             Switzerland    117713.56  </span></a>
<a class="sourceLine" id="cb15-50" data-line-number="50"><span class="co">#&gt;             UK             428472.21  </span></a>
<a class="sourceLine" id="cb15-51" data-line-number="51"><span class="co">#&gt;             USA           3372204.28  </span></a>
<a class="sourceLine" id="cb15-52" data-line-number="52"><span class="co">#&gt;             Total         9291501.08  </span></a>
<a class="sourceLine" id="cb15-53" data-line-number="53"><span class="co">#&gt; Total                    10032628.85</span></a></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="reference/pivot_default_totals.html">pivot_default_totals</a></span>(<span class="ot">FALSE</span>, <span class="ot">FALSE</span>)</a></code></pre></div>
</div>
<div id="default-values" class="section level3">
<h3 class="hasAnchor">
<a href="#default-values" class="anchor"></a>Default values</h3>
<p>By themselves, <code><a href="reference/rows-cols.html">pivot_rows()</a></code> and <code><a href="reference/rows-cols.html">pivot_columns()</a></code> will only provide a list of the unique values of the data frame. There is a way to setup a default aggregation by using <code><a href="reference/pivot_default_values.html">pivot_default_values()</a></code></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="reference/pivot_default_values.html">pivot_default_values</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>())</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"></a>
<a class="sourceLine" id="cb17-3" data-line-number="3">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(status)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt;             n()  </span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; Cancelled     4  </span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt; Disputed      3  </span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">#&gt; In Process    6  </span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">#&gt; On Hold       4  </span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt; Resolved      4  </span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt; Shipped     286</span></a></code></pre></div>
</div>
<div id="convert-to-tibble" class="section level3">
<h3 class="hasAnchor">
<a href="#convert-to-tibble" class="anchor"></a>Convert to tibble</h3>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/reexports.html">as_tibble()</a></code> function is supported to convert the resulting pivot table into a rectangular <code><a href="https://dplyr.tidyverse.org/reference/reexports.html">tibble()</a></code></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_columns</a></span>(status) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>()</a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">#&gt; # A tibble: 19 x 7</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="co">#&gt;    row_name    Cancelled Disputed `In Process` `On Hold` Resolved  Shipped</span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt;    &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">#&gt;  1 Australia         NA    14378.       43971.       NA       NA   572274.</span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co">#&gt;  2 Austria           NA       NA           NA        NA    28551.  173512.</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="co">#&gt;  3 Belgium           NA       NA         8412.       NA       NA   100001.</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="co">#&gt;  4 Canada            NA       NA           NA        NA       NA   224079.</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="co">#&gt;  5 Denmark           NA    26013.          NA        NA    24079.  195546.</span></a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="co">#&gt;  6 Finland           NA       NA           NA        NA       NA   329582.</span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="co">#&gt;  7 France            NA       NA        43785.       NA       NA  1067132.</span></a>
<a class="sourceLine" id="cb18-16" data-line-number="16"><span class="co">#&gt;  8 Germany           NA       NA           NA        NA       NA   220472.</span></a>
<a class="sourceLine" id="cb18-17" data-line-number="17"><span class="co">#&gt;  9 Ireland           NA       NA           NA        NA       NA    57756.</span></a>
<a class="sourceLine" id="cb18-18" data-line-number="18"><span class="co">#&gt; 10 Italy             NA       NA           NA        NA       NA   374674.</span></a>
<a class="sourceLine" id="cb18-19" data-line-number="19"><span class="co">#&gt; 11 Japan             NA       NA           NA        NA       NA   188168.</span></a>
<a class="sourceLine" id="cb18-20" data-line-number="20"><span class="co">#&gt; 12 Norway            NA       NA           NA        NA       NA   307464.</span></a>
<a class="sourceLine" id="cb18-21" data-line-number="21"><span class="co">#&gt; 13 Philippines       NA       NA           NA        NA       NA    94016.</span></a>
<a class="sourceLine" id="cb18-22" data-line-number="22"><span class="co">#&gt; 14 Singapore         NA       NA           NA        NA       NA   288488.</span></a>
<a class="sourceLine" id="cb18-23" data-line-number="23"><span class="co">#&gt; 15 Spain          50011.   31822.       35133.       NA    53816. 1044905.</span></a>
<a class="sourceLine" id="cb18-24" data-line-number="24"><span class="co">#&gt; 16 Sweden         48711.      NA           NA     26260.      NA   135043.</span></a>
<a class="sourceLine" id="cb18-25" data-line-number="25"><span class="co">#&gt; 17 Switzerland       NA       NA           NA        NA       NA   117714.</span></a>
<a class="sourceLine" id="cb18-26" data-line-number="26"><span class="co">#&gt; 18 UK             50408.      NA           NA        NA       NA   428472.</span></a>
<a class="sourceLine" id="cb18-27" data-line-number="27"><span class="co">#&gt; 19 USA            45358.      NA        13429.   152719.   44273. 3372204.</span></a></code></pre></div>
</div>
</div>
<div id="define-dimensions-and-measures" class="section level2">
<h2 class="hasAnchor">
<a href="#define-dimensions-and-measures" class="anchor"></a>Define dimensions and measures</h2>
<p>With <code>pivotable</code>, it is possible to pre-define a set of dimensions and measures that can then be easily accesses and re-used by pivot tables. The idea is to provide a way to centralize data definitions, which creates a consistent reporting.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">orders &lt;-<span class="st"> </span>retail_orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/prep_dimensions.html">prep_dimensions</a></span>(</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">    <span class="dt">order_date =</span> <span class="kw"><a href="reference/dim_hierarchy.html">dim_hierarchy</a></span>(</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">      <span class="dt">year =</span> <span class="kw"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/format.html">format</a></span>(orderdate, <span class="st">"%Y"</span>)),</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">      <span class="dt">month =</span> <span class="kw"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/format.html">format</a></span>(orderdate, <span class="st">"%m"</span>))</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">    ),</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">    status, </a>
<a class="sourceLine" id="cb19-8" data-line-number="8">    country</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="reference/prep_measures.html">prep_measures</a></span>(</a>
<a class="sourceLine" id="cb19-11" data-line-number="11">    <span class="dt">orders_qty =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>(), </a>
<a class="sourceLine" id="cb19-12" data-line-number="12">    <span class="dt">order_total =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales),</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">    <span class="dt">sales_qty =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(status <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"In Process"</span>, <span class="st">"Shipped"</span>), <span class="dv">1</span>, <span class="dv">0</span>)),</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">    <span class="dt">sales_total =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(status <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"In Process"</span>, <span class="st">"Shipped"</span>), sales, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">    )</a></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(status) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_columns</a></span>(order_date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(sales_total)</a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co">#&gt;             2003        2004        2005        </span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="co">#&gt; Cancelled            0           0              </span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="co">#&gt; Disputed                                     0  </span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="co">#&gt; In Process                           144729.96  </span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="co">#&gt; On Hold                          0           0  </span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="co">#&gt; Resolved             0           0           0  </span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="co">#&gt; Shipped     3439718.03  4528047.22  1323735.83</span></a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(status) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_columns</a></span>(order_date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(sales_total) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="reference/pivot_drill.html">pivot_drill</a></span>(order_date)</a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="co">#&gt;             2003                                                                                                                              2004                                                                                                                                 2005                                                   </span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="co">#&gt;             1         2          3         4          5          6          7          8         9          10         11          12         1          2          3          4          5          6          7          8          9          10         11          12         1          2          3          4          5          </span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="co">#&gt; Cancelled                                                                                                           0                                                                             0          0                                                                                                                            </span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co">#&gt; Disputed                                                                                                                                                                                                                                                                                                                    0          0  </span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="co">#&gt; In Process                                                                                                                                                                                                                                                                                                                     144729.96  </span></a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="co">#&gt; On Hold                                                                                                                                                                                                                                                              0                                                      0          0  </span></a>
<a class="sourceLine" id="cb21-12" data-line-number="12"><span class="co">#&gt; Resolved                                                                                                            0                                                                                                                                                0                     0                     0                        </span></a>
<a class="sourceLine" id="cb21-13" data-line-number="13"><span class="co">#&gt; Shipped     129753.6  140836.19  174504.9  201609.55  192673.11  168082.56  187731.88  197809.3  263973.36  491029.46  1029837.66  261876.46  316577.42  311419.53  205733.73  206148.12  228080.73  186255.32  327144.09  461501.27  320750.91  552924.25  1038709.19  372802.66  295270.06  358186.18  320447.04  131218.33  218614.22</span></a></code></pre></div>
</div>
<div id="database-spark-and-data-table-connections" class="section level2">
<h2 class="hasAnchor">
<a href="#database-spark-and-data-table-connections" class="anchor"></a>Database, Spark and <code>data.table</code> connections</h2>
<p>Because <code>pivotable</code> uses <code>dplyr</code> commands to create the aggregations. This allows <code>pivotable</code> to take advantage of the same integration that <code>dplyr</code> has, such as Spark, databases and <code>data.table</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(DBI)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(RSQLite)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"></a>
<a class="sourceLine" id="cb22-4" data-line-number="4">con &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/DBI/man/dbConnect.html">dbConnect</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/RSQLite/man/SQLite.html">SQLite</a></span>(), <span class="st">":memory:"</span>)</a>
<a class="sourceLine" id="cb22-5" data-line-number="5"></a>
<a class="sourceLine" id="cb22-6" data-line-number="6">tbl_sales &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/copy_to.html">copy_to</a></span>(con, retail_orders)</a>
<a class="sourceLine" id="cb22-7" data-line-number="7"></a>
<a class="sourceLine" id="cb22-8" data-line-number="8">tbl_sales <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_columns</a></span>(status) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb22-12" data-line-number="12"><span class="co">#&gt;              Cancelled  Disputed  In Process  On Hold    Resolved  Shipped     </span></a>
<a class="sourceLine" id="cb22-13" data-line-number="13"><span class="co">#&gt; Australia               14378.09    43971.43                        572273.58  </span></a>
<a class="sourceLine" id="cb22-14" data-line-number="14"><span class="co">#&gt; Austria                                                  28550.59   173511.94  </span></a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="co">#&gt; Belgium                              8411.95                        100000.67  </span></a>
<a class="sourceLine" id="cb22-16" data-line-number="16"><span class="co">#&gt; Canada                                                              224078.56  </span></a>
<a class="sourceLine" id="cb22-17" data-line-number="17"><span class="co">#&gt; Denmark                 26012.87                         24078.61   195545.67  </span></a>
<a class="sourceLine" id="cb22-18" data-line-number="18"><span class="co">#&gt; Finland                                                             329581.91  </span></a>
<a class="sourceLine" id="cb22-19" data-line-number="19"><span class="co">#&gt; France                              43784.69                       1067131.83  </span></a>
<a class="sourceLine" id="cb22-20" data-line-number="20"><span class="co">#&gt; Germany                                                             220472.09  </span></a>
<a class="sourceLine" id="cb22-21" data-line-number="21"><span class="co">#&gt; Ireland                                                              57756.43  </span></a>
<a class="sourceLine" id="cb22-22" data-line-number="22"><span class="co">#&gt; Italy                                                               374674.31  </span></a>
<a class="sourceLine" id="cb22-23" data-line-number="23"><span class="co">#&gt; Japan                                                               188167.81  </span></a>
<a class="sourceLine" id="cb22-24" data-line-number="24"><span class="co">#&gt; Norway                                                               307463.7  </span></a>
<a class="sourceLine" id="cb22-25" data-line-number="25"><span class="co">#&gt; Philippines                                                          94015.73  </span></a>
<a class="sourceLine" id="cb22-26" data-line-number="26"><span class="co">#&gt; Singapore                                                           288488.41  </span></a>
<a class="sourceLine" id="cb22-27" data-line-number="27"><span class="co">#&gt; Spain         50010.65   31821.9    35133.34             53815.72  1044905.31  </span></a>
<a class="sourceLine" id="cb22-28" data-line-number="28"><span class="co">#&gt; Sweden        48710.92                         26260.21             135043.08  </span></a>
<a class="sourceLine" id="cb22-29" data-line-number="29"><span class="co">#&gt; Switzerland                                                         117713.56  </span></a>
<a class="sourceLine" id="cb22-30" data-line-number="30"><span class="co">#&gt; UK            50408.25                                              428472.21  </span></a>
<a class="sourceLine" id="cb22-31" data-line-number="31"><span class="co">#&gt; USA           45357.66              13428.55  152718.98  44273.36  3372204.28</span></a></code></pre></div>
<div id="measures-and-dimensions" class="section level3">
<h3 class="hasAnchor">
<a href="#measures-and-dimensions" class="anchor"></a>Measures and dimensions</h3>
<p>It is also possible create a data definition against a database connection. The <code><a href="reference/prep_dimensions.html">prep_dimensions()</a></code> and <code><a href="reference/prep_measures.html">prep_measures()</a></code> calculations will not be send to the database until used in the pivot table.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">orders_db &lt;-<span class="st"> </span>tbl_sales <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/prep_dimensions.html">prep_dimensions</a></span>(</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">    status, </a>
<a class="sourceLine" id="cb23-4" data-line-number="4">    country</a>
<a class="sourceLine" id="cb23-5" data-line-number="5">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="reference/prep_measures.html">prep_measures</a></span>(</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">    <span class="dt">orders_qty =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>(), </a>
<a class="sourceLine" id="cb23-8" data-line-number="8">    <span class="dt">order_total =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sales, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">    <span class="dt">sales_qty =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(status <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"In Process"</span>, <span class="st">"Shipped"</span>), <span class="dv">1</span>, <span class="dv">0</span>), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">    <span class="dt">sales_total =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(status <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"In Process"</span>, <span class="st">"Shipped"</span>), sales, <span class="dv">0</span>), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb23-11" data-line-number="11">    )</a></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">orders_db <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_columns</a></span>(status) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(sales_total)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="co">#&gt;   Cancelled  Disputed  In Process  On Hold  Resolved  Shipped     </span></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="co">#&gt;           0         0   144729.96        0         0  9291501.08</span></a></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/DBI/man/dbDisconnect.html">dbDisconnect</a></span>(con)</a></code></pre></div>
</div>
</div>
<div id="pivottabler" class="section level2">
<h2 class="hasAnchor">
<a href="#pivottabler" class="anchor"></a>pivottabler</h2>
<p><code>pivotable</code> uses <code>pivottabler</code> to print the pivot table into the R console. The <code><a href="reference/to_pivottabler.html">to_pivottabler()</a></code> returns the actual <code>pivottabler</code> object. This allows you to further customize the pivot table using that package’s API.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">pt &lt;-<span class="st"> </span>orders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/rows-cols.html">pivot_rows</a></span>(order_date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/pivot_values.html">pivot_values</a></span>(orders_qty) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/to_pivottabler.html">to_pivottabler</a></span>()</a>
<a class="sourceLine" id="cb26-5" data-line-number="5"></a>
<a class="sourceLine" id="cb26-6" data-line-number="6">pt<span class="op">$</span><span class="kw">asMatrix</span>(<span class="dt">repeatHeaders =</span> <span class="ot">TRUE</span>, <span class="dt">includeHeaders =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="co">#&gt;      [,1]   [,2]        </span></a>
<a class="sourceLine" id="cb26-8" data-line-number="8"><span class="co">#&gt; [1,] ""     "orders_qty"</span></a>
<a class="sourceLine" id="cb26-9" data-line-number="9"><span class="co">#&gt; [2,] "2003" "104"       </span></a>
<a class="sourceLine" id="cb26-10" data-line-number="10"><span class="co">#&gt; [3,] "2004" "144"       </span></a>
<a class="sourceLine" id="cb26-11" data-line-number="11"><span class="co">#&gt; [4,] "2005" "59"</span></a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/edgararuiz/pivotable">https://​github.com/​edgararuiz/​pivotable</a>
</li>
<li>Report a bug at <br><a href="https://github.com/edgararuiz/pivotable/issues">https://​github.com/​edgararuiz/​pivotable/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Edgar Ruiz <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://travis-ci.org/edgararuiz/pivotable"><img src="https://travis-ci.org/edgararuiz/pivotable.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/gh/edgararuiz/pivotable?branch=master"><img src="https://codecov.io/gh/edgararuiz/pivotable/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://CRAN.R-project.org/package=pivotable"><img src="https://www.r-pkg.org/badges/version/pivotable" alt="CRAN status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Edgar Ruiz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
